{"version":3,"sources":["api/axios.js","pages/RegistrationsHistory.js"],"names":["BASE_URL","console","log","axiosInstance","axios","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","concat","error","Promise","reject","response","async","status","clear","window","location","href","get","url","params","then","res","data","post","put","patch","_delete","delete","downloadBlob","filename","responseType","blob","Blob","type","blobUrl","URL","createObjectURL","link","document","createElement","setAttribute","body","appendChild","click","remove","revokeObjectURL","err","uploadFormData","formData","AttendanceHistoryPage","its","setIts","useState","attendanceData","setAttendanceData","setError","loading","setLoading","React","className","style","backgroundImage","backgroundColor","backdropFilter","WebkitBackdropFilter","src","logo","alt","onSubmit","e","preventDefault","dataArray","Array","isArray","detail","value","onChange","target","placeholder","required","disabled","AiOutlineSearch","length","map","header","key","record","idx","miqaat_name","miqaat_date","zone_name","sub_zone_name","checkin_time","checkout_time"],"mappings":"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","file":"static/js/30.0ae4ba6f.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\n// let BASE_URL = \"http://35.172.211.35/api\";\r\nlet BASE_URL = \"https://rms-v2.duckdns.org/api\";\r\n\r\n\r\n\r\nif (process.env.NODE_ENV === \"production\") {\r\n  console.log(\"Running in Production Mode\");\r\n  BASE_URL = \"https://rms-v2.duckdns.org/api\";\r\n} else {\r\n  // BASE_URL = \"http://localhost:8000/api/v1\";\r\n  console.log(\"Running in Development Mode\");\r\n}\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: BASE_URL,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\naxiosInstance.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem(\"accessToken\");\r\n    if (token) {\r\n      config.headers[\"Authorization\"] = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxiosInstance.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    // await logErrorToBackend(error);\r\n    if (error.response && error.response.status === 401) {\r\n      localStorage.clear();\r\n      window.location.href = \"/\";\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const get = async (url, params) => {\r\n  return axiosInstance.get(url, { params }).then((res) => res.data);\r\n};\r\n\r\nexport const post = async (url, data) => {\r\n  return axiosInstance.post(url, data).then((res) => res.data);\r\n};\r\n\r\nexport const put = async (url, data) => {\r\n  return axiosInstance.put(url, data).then((res) => res.data);\r\n};\r\n\r\nexport const patch = async (url, data) => {\r\n  return axiosInstance.patch(url, data).then((res) => res.data);\r\n};\r\n\r\nexport const _delete = async (url) => {\r\n  return axiosInstance.delete(url).then((res) => res.data);\r\n};\r\n\r\nexport const downloadBlob = async (url, filename) => {\r\n  try {\r\n    const response = await axiosInstance.get(url, {\r\n      responseType: \"blob\",\r\n    });\r\n\r\n    const blob = new Blob([response.data], { type: \"application/pdf\" });\r\n    const blobUrl = window.URL.createObjectURL(blob);\r\n\r\n    const link = document.createElement(\"a\");\r\n    link.href = blobUrl;\r\n    link.setAttribute(\"download\", filename);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    link.remove();\r\n    window.URL.revokeObjectURL(blobUrl);\r\n  } catch (err) {\r\n    console.error(\"Download failed:\", err);\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const uploadFormData = async (url, formData) => {\r\n  try {\r\n    const response = await axiosInstance.post(url, formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n    return response.data;\r\n  } catch (err) {\r\n    console.error(\"File upload failed:\", err);\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport default axiosInstance;\r\n","import React, { useState } from 'react';\r\nimport { post } from '../api/axios';\r\nimport { AiOutlineSearch } from 'react-icons/ai';\r\nimport logo from '../assets/img/mainLogo.png';\r\n\r\nconst AttendanceHistoryPage = () => {\r\n  const [its, setIts] = useState('');\r\n  const [attendanceData, setAttendanceData] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setAttendanceData([]);\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await post('/attendance/history/', { its });\r\n      const dataArray = Array.isArray(response) ? response : [response];\r\n      setAttendanceData(dataArray);\r\n    } catch (err) {\r\n      setError(err?.detail || 'An unexpected error occurred. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative min-h-screen bg-cover bg-center bg-gray-900\" style={{ backgroundImage: \"url('/rice.jpg')\" }}>\r\n      {/* BLUR LAYER */}\r\n      <div className=\"absolute inset-0 bg-black/75 backdrop-blur-md z-0\"></div>\r\n\r\n      {/* CONTENT */}\r\n      <div className=\"relative z-10 flex items-center justify-center min-h-screen px-4 py-12\">\r\n        <div   className=\"w-full max-w-xl rounded-2xl shadow-xl p-10 sm:p-12 h-auto min-h-[450px] relative overflow-hidden\"\r\n  style={{\r\n    backgroundColor: 'rgba(255, 255, 255, 0.4)',\r\n    backdropFilter: 'blur(10px)',\r\n    WebkitBackdropFilter: 'blur(10px)',\r\n  }}>\r\n          {/* Logo */}\r\n         <div className=\"flex justify-center items-center\">\r\n                 <img src={logo} alt=\"Logo\" className=\"h-25 w-auto\" />\r\n          </div>\r\n          {/* Heading */}\r\n          <h2 className=\"text-3xl sm:text-3xl font-extrabold text-center text-gray-700  mb-6 tracking-tight\">\r\n            Miqaat Attendance History\r\n          </h2>\r\n\r\n          {/* Form */}\r\n          <form onSubmit={handleSubmit} className=\"flex flex-col sm:flex-row items-center gap-3 mb-8 justify-center\">\r\n            <input\r\n              type=\"text\"\r\n              value={its}\r\n              onChange={(e) => setIts(e.target.value)}\r\n              placeholder=\"Enter ITS number\"\r\n              required\r\n              className=\"w-full sm:w-64 rounded-lg border border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200\"\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"flex items-center justify-center bg-indigo-600 text-white px-4 py-2 rounded-lg shadow-md text-sm font-medium transition-all duration-200 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <AiOutlineSearch className=\"mr-1.5 text-base\" />\r\n              {loading ? 'Searching...' : 'Search'}\r\n            </button>\r\n          </form>\r\n\r\n          {/* Error Message */}\r\n          {error && (\r\n            <p className=\"text-red-500 text-lg text-center mb-6 font-medium animate-pulse\">{error}</p>\r\n          )}\r\n\r\n          {/* Results */}\r\n          {attendanceData.length > 0 ? (\r\n            <div className=\"overflow-x-auto rounded-lg  border-gray-200 dark:border-gray-700\">\r\n              <table className=\"min-w-full table-auto text-sm text-left text-gray-700 dark:text-gray-200\">\r\n                <thead className=\"bg-indigo-600 text-white dark:bg-indigo-800\">\r\n                  <tr>\r\n                    {['Miqaat Name', 'Miqaat Date', 'Zone', 'Sub Zone', 'Check-in', 'Check-out'].map((header) => (\r\n                      <th key={header} className=\"px-4 sm:px-6 py-3 font-semibold tracking-wider\">\r\n                        {header}\r\n                      </th>\r\n                    ))}\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700\">\r\n                  {attendanceData.map((record, idx) => (\r\n                    <tr\r\n                      key={idx}\r\n                      className=\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-150\"\r\n                    >\r\n                      <td className=\"px-4 sm:px-6 py-3\">{record.miqaat_name}</td>\r\n                      <td className=\"px-4 sm:px-6 py-3\">{record.miqaat_date}</td>\r\n                      <td className=\"px-4 sm:px-6 py-3\">{record.zone_name}</td>\r\n                      <td className=\"px-4 sm:px-6 py-3\">{record.sub_zone_name}</td>\r\n                      <td className=\"px-4 sm:px-6 py-3\">{record.checkin_time || '—'}</td>\r\n                      <td className=\"px-4 sm:px-6 py-3\">{record.checkout_time || '—'}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            !loading &&\r\n            !error && (\r\n              <p className=\"text-center text-gray-700 mt-6 text-lg\">\r\n              </p>\r\n            )\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceHistoryPage;"],"sourceRoot":""}