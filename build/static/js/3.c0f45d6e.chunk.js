(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[3],{102:function(e,t,a){"use strict";a.r(t);var r=a(11),l=a(0),n=a.n(l),s=a(1),c=a(57),o=a(40),i=a(18),d=a.n(i),m=a(14),u=a(41),p=a.n(u),g=a(44),b=a(17);t.default=function(){const e=Object(s.h)(),t=Object(s.g)(),{modalState:a,openModal:i,closeModal:u,clearModalState:y}=Object(m.b)(),x=new URLSearchParams(e.search).get("miqaat_type"),[h,f]=Object(l.useState)(1),[v,E]=Object(l.useState)([]),[w,k]=Object(l.useState)(0),[N,j]=Object(l.useState)(!1),[q,O]=Object(l.useState)(!1),[_,C]=Object(l.useState)(null),[S,D]=Object(l.useState)(!1),[M,R]=Object(l.useState)(""),[z,T]=Object(l.useState)(null),[F,L]=Object(l.useState)(!1),A=Object(l.useRef)(),I=Object(l.useRef)(!1),P=Object(l.useRef)(!0),U=Object(l.useRef)(e.key),[B,J]=Object(l.useState)(!1),W=async(e,t)=>{if(!I.current){I.current=!0,j(!0);try{let a="/miqaat/filter/";t&&(a+="?miqaat_type=".concat(t));const r=await Object(o.c)(a);r&&Array.isArray(r)?(E(r.slice(10*(e-1),10*e)),k(r.length)):(console.error("Unexpected response format:",r),E([]),k(0))}catch(a){console.error("Error fetching miqaat data:",a),E([]),k(0)}finally{j(!1),I.current=!1}}};Object(l.useEffect)(()=>{(P.current||A.current!==x)&&!I.current&&(P.current=!1,A.current!==x&&f(1),A.current=x,ee(),setTimeout(()=>{W(1,x)},0));try{const e=JSON.parse(localStorage.getItem("user"));J(!0===(null===e||void 0===e?void 0:e.is_admin))}catch(e){console.error("Error parsing is_admin from localStorage:",e)}},[x]),Object(l.useEffect)(()=>{if(e.key===U.current)return;U.current=e.key;window.innerWidth<768?a.fromFeatureModal&&a.selectedEvent&&!a.isDialogOpen?i(a.selectedEvent,!0):a.isDialogOpen&&!a.fromFeatureModal&&u():a.isDialogOpen&&u()},[e.key,a.fromFeatureModal,a.selectedEvent,a.isDialogOpen,i,u]);const H=e=>{e===h||I.current||(f(e),setTimeout(()=>{W(e,x)},0))},Z=function(e,r,l){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l&&l.stopPropagation();let s="";switch(e){case"miqaat-menu":s="/app/miqaat-menu/".concat(r);break;case"miqaat-attendance":s="/app/miqaat-attendance/".concat(r);break;case"counter-packing":s="/app/counter-packing/".concat(r);break;case"distribution":s="/app/distribution/".concat(r);break;case"leftover-degs":s="/app/leftover-degs/".concat(r);break;default:return void console.error("Unknown feature type:",e)}const c={fromFeatureModal:n,selectedEvent:n?a.selectedEvent:null};t.push(s,c)},G=async(e,t)=>{t&&t.stopPropagation();try{if(window.confirm("Are you sure you want to delete this Miqaat?")){await Object(o.a)("/miqaat/".concat(e,"/"));E(t=>t.filter(t=>t.id!==e)),d.a.success("Miqaat deleted successfully")}}catch(a){console.error("Error deleting Miqaat:",a),alert("Failed to delete Miqaat. Please try again.")}},Q=e=>({Menu:"bg-blue-500",Attendance:"bg-green-500","Counter Packing":"bg-yellow-500",Distribution:"bg-purple-500","Leftover Degs":"bg-teal-500"}[e]||"bg-gray-500"),[V,K]=Object(l.useState)({}),X=(e,t,a)=>{K(l=>Object(r.a)(Object(r.a)({},l),{},{[e]:Object(r.a)(Object(r.a)({},l[e]),{},{[t]:Number(a)})}))},[Y,$]=Object(l.useState)([]),ee=async()=>{const e=await Object(o.c)("/zone/list/");$(e);const t={};e.forEach(e=>{t[e.id]={thaals_polled:0,thaals_cooked:0,thaals_served:0}}),K(t)},te=async(e,t)=>{t&&t.stopPropagation();const a=e.id;try{const t=await Object(o.c)("/miqaat/zones/".concat(a,"/"));$(t);const r={};t.forEach(e=>{const t=e.zone.id;r[t]={thaals_polled:e.thaals_polled||0,thaals_cooked:e.thaals_cooked||0,thaals_served:e.thaals_served||0}}),K(r),C({miqaatName:e.miqaat_name,miqaatId:e.id}),O(!0)}catch(r){console.error("Failed to load zones for miqaat",r)}},ae=(e,a)=>{a&&a.stopPropagation(),t.push("/app/edit-miqaat/".concat(e))},[re,le]=Object(l.useState)(!1),ne=Math.ceil(w/10),se=10*(h-1),ce=Object(l.useRef)(null),oe=async e=>{try{await Object(o.b)("/report/download/".concat(e,"/"),"dana report - ".concat(e,".pdf"))}catch(t){d.a.error("Failed to download report.")}},ie=e=>{T(e),R(""),D(!0)},de=e=>{const t="https://danadxb.com/registration/".concat(e);navigator.clipboard.writeText(t).then(()=>d.a.success("Registration link copied!")).catch(()=>d.a.error("Failed to copy link"))};return n.a.createElement("div",{className:"relative w-full px-4 py-6"},n.a.createElement("img",{src:p.a,alt:"Watermark",className:"absolute pointer-events-none select-none",style:{top:"50%",left:"50%",position:"absolute",transform:"translate(-50%, -50%)",width:"70vw",maxWidth:"400px",height:"auto",opacity:.05,zIndex:0}}),n.a.createElement("div",{className:"relative z-10"},n.a.createElement("div",{className:"flex flex-col sm:flex-row sm:justify-between items-start sm:items-center mb-6 gap-4"},n.a.createElement("h1",{className:"text-2xl font-semibold dark:text-white"}," ",n.a.createElement("button",{onClick:()=>{t.goBack()},className:"mr-4"},n.a.createElement(g.a,{className:"w-5 h-5 dark:text-white"})),(()=>{switch(x){case"general_miqaats":return"General Miqaats";case"ramadan":return"Ramadan";case"private_events":return"Private Events";default:return"Miqaats"}})()),n.a.createElement("div",{className:"flex gap-4"},B&&n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{className:"bg-purple-600 hover:bg-purple-700 text-white text-sm sm:text-base px-4 py-2 rounded flex items-center justify-center w-full sm:w-auto",onClick:()=>{x?t.push("/app/forms?miqaat_type=".concat(x)):t.push("/app/forms")}},n.a.createElement(c.d,{className:"mr-2"})," Create"),n.a.createElement("button",{className:"bg-green-600 hover:bg-green-700 text-white text-sm sm:text-base px-4 py-2 rounded flex items-center justify-center w-full sm:w-auto",onClick:()=>{ce.current&&ce.current.click()}},n.a.createElement(c.g,{className:"mr-2"})," Upload CSV")),n.a.createElement("input",{type:"file",accept:".csv",ref:ce,onChange:async()=>{var e,t;const a=null===(e=ce.current)||void 0===e||null===(t=e.files)||void 0===t?void 0:t[0];if(!a)return;const r=new FormData;r.append("file",a);try{var l,n,s;const e=await Object(o.g)("/upload-miqaat-csv",r);if((null===(l=e.created_miqaats)||void 0===l?void 0:l.length)&&d.a.success("".concat(e.created_miqaats.length," Miqaats uploaded successfully.")),null===(n=e.data)||void 0===n||null===(s=n.errors)||void 0===s?void 0:s.length){const t=e.data.errors.map(e=>"Row ".concat(e.row,": ").concat(e.error)).join("\n");d.a.error("Some rows failed:\n".concat(t),{duration:5e3})}W(1,x)}catch(m){var c,i;if(null===(c=m.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.errors){const e=m.response.data.errors.map(e=>"Row ".concat(e.row,": ").concat(e.error)).join("\n");d.a.error("Upload validation failed:\n".concat(e),{duration:8e3})}else d.a.error("Upload failed: "+(m.message||"Unknown error"))}finally{ce.current&&(ce.current.value=null)}},className:"hidden"}))),N?n.a.createElement("div",{className:"flex justify-center my-8"},n.a.createElement("p",{className:"text-gray-700 dark:text-gray-400"},"Loading data...")):0===v.length?n.a.createElement("div",{className:"text-center py-8"},n.a.createElement("p",{className:"text-gray-700 dark:text-gray-400"},"No records found")):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"hidden md:block rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden bg-white dark:bg-gray-800"},n.a.createElement("div",{className:"w-full"},n.a.createElement("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700"},n.a.createElement("thead",{className:"bg-gray-50 dark:bg-gray-700"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-12"},"SNO."),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"MIQAAT NAME"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"DATE"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"HIJRI DATE"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"FEATURES"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-20"},"ACTIONS"))),n.a.createElement("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700"},v.map((e,t)=>n.a.createElement("tr",{key:e.id,className:"hover:bg-gray-50 dark:hover:bg-gray-700"},n.a.createElement("td",{className:"px-4 py-3 whitespace-nowrap"},n.a.createElement("span",{className:"text-sm text-gray-900 dark:text-gray-300"},se+t+1)),n.a.createElement("td",{className:"px-4 py-3 whitespace-nowrap"},n.a.createElement("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300"},e.miqaat_name)),n.a.createElement("td",{className:"px-4 py-3 whitespace-nowrap"},n.a.createElement("span",{className:"text-sm text-gray-900 dark:text-gray-300"},new Date(e.miqaat_date).toLocaleDateString())),n.a.createElement("td",{className:"px-4 py-3 whitespace-nowrap"},n.a.createElement("span",{className:"text-sm text-gray-900 dark:text-gray-300"},e.hijri_date)),n.a.createElement("td",{className:"px-4 py-3"},n.a.createElement("div",{className:"flex flex-wrap gap-1"},n.a.createElement("button",{onClick:t=>te(e,t),className:"bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-md px-3 py-1"},"Thaals"),[...B?[{name:"Menu",type:"miqaat-menu"},{name:"Attendance",type:"miqaat-attendance"}]:[],{name:"Counter Packing",type:"counter-packing"},{name:"Distribution",type:"distribution"},{name:"Leftover Degs",type:"leftover-degs"}].map(t=>n.a.createElement("button",{key:t.name,onClick:a=>Z(t.type,e.id,a),className:"px-2 py-1 text-xs text-white transition-colors hover:brightness-90 focus:outline-none focus:ring-1 ".concat(Q(t.name)," rounded")},t.name)),n.a.createElement("button",{onClick:()=>oe(e.id),className:"px-2 py-1 text-xs text-white bg-green-700 hover:bg-green-800 rounded transition-colors"},"Download Report"),n.a.createElement("button",{onClick:()=>ie(e.id),className:"px-2 py-1 text-xs text-white bg-yellow-600 hover:bg-yellow-700 rounded transition-colors"},"Email Report"),n.a.createElement("button",{onClick:()=>de(e.id),className:"px-2 py-1 text-xs text-white bg-blue-600 hover:bg-blue-700 rounded transition-colors"},"Registration"))),n.a.createElement("td",{className:"px-4 py-3 whitespace-nowrap"},B&&n.a.createElement("div",{className:"flex justify-end mt-2 space-x-2"},n.a.createElement("button",{className:"text-gray-600 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400",onClick:t=>ae(e.id,t)},n.a.createElement(c.c,{className:"h-4 w-4"})),n.a.createElement("button",{className:"text-gray-600 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400",onClick:t=>G(e.id,t)},n.a.createElement(c.f,{className:"h-4 w-4"})))))))))),n.a.createElement("div",{className:"md:hidden space-y-4"},v.map(e=>n.a.createElement("div",{key:e.id,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",onClick:()=>(e=>{i(e)})(e)},n.a.createElement("div",{className:"grid grid-cols-3 p-4 cursor-pointer"},n.a.createElement("div",{className:"col-span-2"},n.a.createElement("h3",{className:"font-semibold text-gray-800 dark:text-gray-300"},e.miqaat_name),n.a.createElement("p",{className:"text-sm text-gray-500"},new Date(e.miqaat_date).toLocaleDateString())),n.a.createElement("div",{className:"text-right"},B&&n.a.createElement("div",{className:"flex justify-end mt-2 space-x-2"},n.a.createElement("button",{className:"text-gray-600 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400",onClick:t=>ae(e.id,t)},n.a.createElement(c.c,{className:"h-4 w-4"})),n.a.createElement("button",{className:"text-gray-600 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400",onClick:t=>G(e.id,t)},n.a.createElement(c.f,{className:"h-4 w-4"})))))))),n.a.createElement("div",{className:"flex items-center justify-between mt-4"},n.a.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},"Showing ",se+1,"-",Math.min(se+10,w)," OF"," ",w),n.a.createElement("div",{className:"flex items-center gap-2"},n.a.createElement("button",{className:"p-2 border border-gray-300 dark:border-gray-600 rounded disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>H(h-1),disabled:1===h},n.a.createElement(c.a,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})),n.a.createElement("div",{className:"px-4 py-2 bg-purple-600 text-white rounded"},h),n.a.createElement("button",{className:"p-2 border border-gray-300 dark:border-gray-600 rounded disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>H(h+1),disabled:h===ne},n.a.createElement(c.b,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}))))),a.isDialogOpen&&a.selectedEvent&&n.a.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},n.a.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-11/12 max-w-md max-h-[90vh] overflow-auto"},n.a.createElement("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700"},n.a.createElement("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-300"},a.selectedEvent.miqaat_name),n.a.createElement("button",{className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200",onClick:u},n.a.createElement(c.e,{className:"h-6 w-6"}))),n.a.createElement("div",{className:"p-4 space-y-4"},n.a.createElement("div",{className:"grid grid-cols-2 gap-4"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm text-gray-500"},"Date"),n.a.createElement("p",{className:"font-medium text-gray-900 dark:text-white"},new Date(a.selectedEvent.miqaat_date).toLocaleDateString())),n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm text-gray-500"},"Hijri Date"),n.a.createElement("p",{className:"font-medium text-gray-900 dark:text-white"},a.selectedEvent.hijri_date))),n.a.createElement("div",null,n.a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 w-full"},n.a.createElement("button",{onClick:e=>te(a.selectedEvent,e),className:"bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg text-sm font-semibold transition-all"},"Thaals"),[...B?[{name:"Menu",type:"miqaat-menu",color:"bg-blue-500"},{name:"Attendance",type:"miqaat-attendance",color:"bg-green-500"}]:[],{name:"Counter Packing",type:"counter-packing",color:"bg-yellow-500"},{name:"Distribution",type:"distribution",color:"bg-purple-500"},{name:"Leftover Degs",type:"leftover-degs",color:"bg-teal-500"}].map(e=>n.a.createElement("button",{key:e.name,onClick:t=>Z(e.type,a.selectedEvent.id,t,!0),className:"w-full py-3 text-white rounded-lg text-sm font-semibold ".concat(e.color," hover:opacity-90 transition-all")},e.name)),n.a.createElement("button",{onClick:()=>oe(a.selectedEvent.id),className:"bg-red-400 hover:bg-red-600 text-white py-3 rounded-lg text-sm font-semibold transition-all"},"Download Report"),n.a.createElement("button",{onClick:()=>ie(a.selectedEvent.id),className:"bg-yellow-300 hover:bg-yellow-500 text-white py-3 rounded-lg text-sm font-semibold transition-all"},"Email Report"),n.a.createElement("button",{onClick:()=>de(a.selectedEvent.id),className:"bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg text-sm font-semibold transition-all col-span-2 sm:col-span-1"},"Copy Registration Link"))))))),q&&_&&n.a.createElement("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black bg-opacity-50 px-2 sm:px-4 py-4 overflow-y-auto min-h-screen"},n.a.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-3xl shadow-xl max-h-[90vh] sm:max-h-[80vh] flex flex-col"},n.a.createElement("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10"},n.a.createElement("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white"},"Thaals for ",_.miqaatName),n.a.createElement("button",{className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",onClick:()=>O(!1)},n.a.createElement(c.e,{className:"h-5 w-5"}))),n.a.createElement("form",{onSubmit:async e=>{e.preventDefault();const t=null===_||void 0===_?void 0:_.miqaatId;if(t){le(!0);try{for(const e of Y){const a=e.zone.id,r=V[a];await Object(o.e)("/miqaat-zone/update/",{miqaat_id:t,zone_id:a,thaals_polled:r.thaals_polled,thaals_cooked:r.thaals_cooked,thaals_served:r.thaals_served})}console.log("All MiqaatZone records updated"),d.a.success("Thaals updated successfully"),O(!1)}catch(a){console.error("Error updating thaals:",a),d.a.error("Failed to update thaals")}finally{le(!1)}}else console.error("Miqaat ID is missing")},className:"flex-1 overflow-y-auto"},n.a.createElement("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6"},Y.map(e=>{var t,a,l;const s=e.zone.id;return n.a.createElement("div",{key:s,className:"w-full"},n.a.createElement("div",{className:"p-3 sm:p-4 border border-gray-300 dark:border-gray-600 rounded-md"},n.a.createElement("h3",{className:"text-sm sm:text-md font-semibold text-gray-800 dark:text-white mb-3 sm:mb-4 break-words"},e.zone.name),n.a.createElement("div",{className:"flex flex-col space-y-3 sm:grid sm:grid-cols-2 md:grid-cols-3 sm:gap-4"},n.a.createElement(b.Label,{className:"flex flex-col"},n.a.createElement("span",{className:"text-sm font-medium mb-1"},"Thaals Polled"),n.a.createElement(b.Input,{type:"number",className:"w-full text-sm p-2 rounded-md border-gray-300 dark:border-gray-600 focus:ring focus:ring-blue-500",value:(null===(t=V[s])||void 0===t?void 0:t.thaals_polled)||0,min:"0",onChange:e=>X(s,"thaals_polled",e.target.value)})),n.a.createElement(b.Label,{className:"flex flex-col"},n.a.createElement("span",{className:"text-sm font-medium mb-1 -mt-3"},"Thaals Cooked"),n.a.createElement(b.Input,{type:"number",className:"w-full text-sm p-2 rounded-md border-gray-300 dark:border-gray-600 focus:ring focus:ring-blue-500",value:(null===(a=V[s])||void 0===a?void 0:a.thaals_cooked)||0,min:"0",onChange:e=>X(s,"thaals_cooked",e.target.value)})),n.a.createElement(b.Label,{className:"flex flex-col"},n.a.createElement("span",{className:"text-sm font-medium mb-1 -mt-3"},"Thaals Served"),n.a.createElement(b.Input,{type:"number",className:"w-full text-sm p-2 rounded-md border-gray-300 dark:border-gray-600 focus:ring focus:ring-blue-500",value:(null===(l=V[s])||void 0===l?void 0:l.thaals_served)||0,min:"0",onChange:e=>X(s,"thaals_served",e.target.value)}))),n.a.createElement("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 mt-4 sm:mt-6 sm:justify-end"},n.a.createElement(b.Button,{type:"submit",disabled:re,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white text-sm p-2 rounded-md order-2 sm:order-1"},re?"Saving...":"Save"),n.a.createElement(b.Button,{type:"button",className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white text-sm p-2 rounded-md order-1 sm:order-2",onClick:()=>(async e=>{const t=null===_||void 0===_?void 0:_.miqaatId;if(t)try{await Object(o.a)("/miqaat-zone/delete/?miqaat_id=".concat(t,"&zone_id=").concat(e)),d.a.success("Zone deleted from Miqaat \u2714\ufe0f"),$(t=>t.filter(t=>t.zone.id!==e)),K(t=>{const a=Object(r.a)({},t);return delete a[e],a})}catch(a){console.error("Failed to delete zone:",a),d.a.error("Failed to delete zone")}else console.error("Miqaat ID not found")})(s)},"Delete"))))}))))),S&&n.a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.a.createElement("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-sm"},n.a.createElement("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-100"},"Send Report via Email"),n.a.createElement("input",{type:"email",placeholder:"Enter email",value:M,onChange:e=>R(e.target.value),className:"w-full mb-4 p-2 border border-gray-300 dark:border-gray-600 rounded"}),n.a.createElement("div",{className:"flex justify-end gap-2"},n.a.createElement("button",{className:"bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded",onClick:()=>D(!1),disabled:F},"Cancel"),n.a.createElement("button",{className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded",onClick:async()=>{if(!M)return d.a.error("Email is required.");L(!0);try{await Object(o.e)("/report/email/".concat(z,"/"),{email_to:M}),d.a.success("Email sent!"),D(!1)}catch(e){d.a.error("Failed to send email.")}finally{L(!1)}},disabled:F},F?"Sending...":"Send")))))}},40:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m})),a.d(t,"g",(function(){return u}));var r=a(109);let l="https://rms-v2.duckdns.org/api";console.log("Running in Production Mode"),l="https://rms-v2.duckdns.org/api";const n=r.a.create({baseURL:l,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>(e.response&&401===e.response.status&&(localStorage.clear(),window.location.href="/"),Promise.reject(e)));const s=async(e,t)=>n.get(e,{params:t}).then(e=>e.data),c=async(e,t)=>n.post(e,t).then(e=>e.data),o=async(e,t)=>n.put(e,t).then(e=>e.data),i=async(e,t)=>n.patch(e,t).then(e=>e.data),d=async e=>n.delete(e).then(e=>e.data),m=async(e,t)=>{try{const a=await n.get(e,{responseType:"blob"}),r=new Blob([a.data],{type:"application/pdf"}),l=window.URL.createObjectURL(r),s=document.createElement("a");s.href=l,s.setAttribute("download",t),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(l)}catch(a){throw console.error("Download failed:",a),a}},u=async(e,t)=>{try{return(await n.post(e,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("File upload failed:",a),a}}}}]);
//# sourceMappingURL=3.c0f45d6e.chunk.js.map