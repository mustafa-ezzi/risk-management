(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[17],{119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(1),c=a(40),s=a(45),o=a(17),i=a(44),m=a(11),d=a(18),u=a.n(d);var p=function(e){let{isOpen:t,onClose:a,onContainerCreated:l}=e;const[s,i]=Object(n.useState)({name:""}),[d,p]=Object(n.useState)(!1),[b,E]=Object(n.useState)({});Object(n.useEffect)(()=>{t&&(i({name:""}),E({}))},[t]);const f=async e=>{if(e.preventDefault(),(()=>{const e={};return s.name.trim()||(e.name="Container name is required"),E(e),0===Object.keys(e).length})())try{p(!0);const e={name:s.name.trim()};await Object(c.e)("/container/",e);u.a.success("Container created successfully"),l&&l(),a()}catch(t){console.error("Error creating container:",t),E({submit:"Failed to create container. Please try again."})}finally{p(!1)}};return r.a.createElement(o.Modal,{isOpen:t,onClose:a},r.a.createElement(o.ModalHeader,null,"Create New Container"),r.a.createElement(o.ModalBody,null,r.a.createElement("form",{onSubmit:f},r.a.createElement("div",{className:"mb-4"},r.a.createElement(o.Label,null,r.a.createElement("span",null,"Container Name *"),r.a.createElement(o.Input,{className:"mt-1",name:"name",value:s.name,onChange:e=>{const{name:t,value:a}=e.target;i(e=>Object(m.a)(Object(m.a)({},e),{},{[t]:a}))},placeholder:"Enter container name"}),b.name&&r.a.createElement("span",{className:"text-xs text-red-600"},b.name))),b.submit&&r.a.createElement("div",{className:"mb-4"},r.a.createElement("p",{className:"text-sm text-red-600"},b.submit)))),r.a.createElement(o.ModalFooter,null,r.a.createElement("div",{className:"flex flex-col space-y-2 sm:space-y-0 sm:space-x-2 sm:flex-row"},r.a.createElement(o.Button,{onClick:f,disabled:d},d?"Creating...":"Create Container"))))};var b=function(e){let{isOpen:t,onClose:a,onContainerUpdated:l,containerData:s}=e;const[i,d]=Object(n.useState)({name:""}),[u,p]=Object(n.useState)(!1),[b,E]=Object(n.useState)({});Object(n.useEffect)(()=>{s&&d({name:s.name||""})},[s]);const f=async e=>{if(e.preventDefault(),(()=>{const e={};return i.name.trim()||(e.name="Container name is required"),E(e),0===Object.keys(e).length})())try{p(!0);const e={name:i.name.trim()};await Object(c.d)("/container/".concat(s.id,"/"),e),l&&l(),a()}catch(t){console.error("Error updating container:",t),E({submit:"Failed to update container. Please try again."})}finally{p(!1)}};return r.a.createElement(o.Modal,{isOpen:t,onClose:a},r.a.createElement(o.ModalHeader,null,"Edit Container"),r.a.createElement(o.ModalBody,null,r.a.createElement("form",{onSubmit:f},r.a.createElement("div",{className:"mb-4"},r.a.createElement(o.Label,null,r.a.createElement("span",null,"Container Name *"),r.a.createElement(o.Input,{className:"mt-1",name:"name",value:i.name,onChange:e=>{const{name:t,value:a}=e.target;d(e=>Object(m.a)(Object(m.a)({},e),{},{[t]:a}))},placeholder:"Enter container name"}),b.name&&r.a.createElement("span",{className:"text-xs text-red-600"},b.name))),b.submit&&r.a.createElement("div",{className:"mb-4"},r.a.createElement("p",{className:"text-sm text-red-600"},b.submit)))),r.a.createElement(o.ModalFooter,null,r.a.createElement("div",{className:"flex flex-col space-y-2 sm:space-y-0 sm:space-x-2 sm:flex-row"},r.a.createElement(o.Button,{onClick:f,disabled:u},u?"Updating...":"Update Container"))))},E=a(41),f=a.n(E);t.default=function(){Object(l.g)();const[e,t]=Object(n.useState)([]),[a,m]=Object(n.useState)(!0),[d,E]=Object(n.useState)(null),[y,h]=Object(n.useState)(!1),[x,g]=Object(n.useState)(!1),[w,C]=Object(n.useState)(null),[N,v]=Object(n.useState)(0);Object(n.useEffect)(()=>{(async()=>{try{m(!0);const e=await Object(c.c)("/container/list/");t(e)}catch(e){console.error("Error fetching container data:",e),E("Failed to load container data")}finally{m(!1)}})()},[N]);const j=e=>{C(e),g(!0)},k=async e=>{try{window.confirm("Are you sure you want to delete this container?")&&(await Object(c.a)("/container/".concat(e,"/")),t(t=>t.filter(t=>t.id!==e)),u.a.success("Container deleted successfully"))}catch(d){console.error("Error deleting container:",d),u.a.error("Failed to delete container. Please try again.")}};return r.a.createElement("div",{className:"relative w-full px-4 py-6"},r.a.createElement("img",{src:f.a,alt:"Watermark",className:"absolute pointer-events-none select-none",style:{top:"50%",left:"50%",position:"absolute",transform:"translate(-50%, -50%)",width:"70vw",maxWidth:"400px",height:"auto",opacity:.05,zIndex:0}}),r.a.createElement("div",{className:"relative z-10"},"            ",r.a.createElement("div",{className:"flex items-center justify-between mb-6"},r.a.createElement(s.a,null,"Containers"),r.a.createElement("button",{onClick:()=>{h(!0)},className:"flex items-center bg-purple-600 text-white rounded-lg",style:{fontSize:window.innerWidth<768?"0.875rem":"1rem",padding:window.innerWidth<768?"0.5rem 1rem":"0.75rem 1rem"}},r.a.createElement(i.e,{className:"mr-1 ".concat(window.innerWidth<768?"w-3 h-3":"w-4 h-4")}),"Add Container")),a?r.a.createElement("div",{className:"flex justify-center my-8"},r.a.createElement("p",{className:"text-gray-700 dark:text-gray-300"},"Loading data...")):d?r.a.createElement("div",{className:"text-center py-8"},r.a.createElement("p",{className:"text-red-600 dark:text-red-400"},d)):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.TableContainer,{className:"hidden md:block mb-8"},r.a.createElement(o.Table,null,r.a.createElement(o.TableHeader,null,r.a.createElement("tr",null,r.a.createElement(o.TableCell,null,"ID"),r.a.createElement(o.TableCell,null,"Name"),r.a.createElement(o.TableCell,null,"Actions"))),r.a.createElement(o.TableBody,null,e.map((e,t)=>r.a.createElement(o.TableRow,{key:e.id},r.a.createElement(o.TableCell,null,r.a.createElement("span",{className:"text-sm font-semibold"},t+1)),r.a.createElement(o.TableCell,null,r.a.createElement("span",{className:"text-sm"},e.name)),r.a.createElement(o.TableCell,null,r.a.createElement("div",{className:"flex items-center space-x-4"},r.a.createElement(o.Button,{layout:"link",size:"icon","aria-label":"Edit",onClick:()=>j(e)},r.a.createElement(i.d,{className:"w-5 h-5","aria-hidden":"true"})),r.a.createElement(o.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>k(e.id)},r.a.createElement(i.b,{className:"w-5 h-5","aria-hidden":"true"}))))))))),r.a.createElement("div",{className:"md:hidden space-y-3"},0===e.length?r.a.createElement("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400"},"No containers found"):e.map((e,t)=>r.a.createElement("div",{key:e.id,className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 hover:border-purple-200 dark:hover:border-purple-700 transition-colors"},r.a.createElement("div",{className:"flex items-center p-3"},r.a.createElement("div",{className:"h-12 w-12 mr-3 rounded-full bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-300 \r flex items-center justify-center font-medium"},t+1),r.a.createElement("div",{className:"flex-1 min-w-0"},r.a.createElement("div",{className:"flex items-center justify-between"},r.a.createElement("p",{className:"font-medium dark:text-white truncate"},e.name))),r.a.createElement("div",{className:"flex space-x-2"},r.a.createElement("button",{onClick:()=>j(e),className:"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 p-1 rounded"},r.a.createElement(i.d,{className:"h-5 w-5"})),r.a.createElement("button",{onClick:()=>k(e.id),className:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 p-1 rounded"},r.a.createElement(i.b,{className:"h-5 w-5"})))))))),r.a.createElement(p,{isOpen:y,onClose:()=>{h(!1)},onContainerCreated:()=>{v(e=>e+1)}}),w&&r.a.createElement(b,{isOpen:x,onClose:()=>{g(!1),C(null)},onContainerUpdated:()=>{v(e=>e+1),u.a.success("Container updated successfully")},containerData:w})))}},40:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return d})),a.d(t,"g",(function(){return u}));var n=a(109);let r="https://rms-v2.duckdns.org/api";console.log("Running in Production Mode"),r="https://rms-v2.duckdns.org/api";const l=n.a.create({baseURL:r,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>(e.response&&401===e.response.status&&(localStorage.clear(),window.location.href="/"),Promise.reject(e)));const c=async(e,t)=>l.get(e,{params:t}).then(e=>e.data),s=async(e,t)=>l.post(e,t).then(e=>e.data),o=async(e,t)=>l.put(e,t).then(e=>e.data),i=async(e,t)=>l.patch(e,t).then(e=>e.data),m=async e=>l.delete(e).then(e=>e.data),d=async(e,t)=>{try{const a=await l.get(e,{responseType:"blob"}),n=new Blob([a.data],{type:"application/pdf"}),r=window.URL.createObjectURL(n),c=document.createElement("a");c.href=r,c.setAttribute("download",t),document.body.appendChild(c),c.click(),c.remove(),window.URL.revokeObjectURL(r)}catch(a){throw console.error("Download failed:",a),a}},u=async(e,t)=>{try{return(await l.post(e,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("File upload failed:",a),a}}},45:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){let{children:t}=e;return r.a.createElement("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200"},t)}}}]);
//# sourceMappingURL=17.f187408b.chunk.js.map