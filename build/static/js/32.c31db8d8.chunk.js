(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[32],{40:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"g",(function(){return m}));var r=a(109);let n="https://rms-v2.duckdns.org/api";console.log("Running in Production Mode"),n="https://rms-v2.duckdns.org/api";const s=r.a.create({baseURL:n,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,async e=>(e.response&&401===e.response.status&&(localStorage.clear(),window.location.href="/"),Promise.reject(e)));const o=async(e,t)=>s.get(e,{params:t}).then(e=>e.data),c=async(e,t)=>s.post(e,t).then(e=>e.data),i=async(e,t)=>s.put(e,t).then(e=>e.data),l=async(e,t)=>s.patch(e,t).then(e=>e.data),d=async e=>s.delete(e).then(e=>e.data),u=async(e,t)=>{try{const a=await s.get(e,{responseType:"blob"}),r=new Blob([a.data],{type:"application/pdf"}),n=window.URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.setAttribute("download",t),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(n)}catch(a){throw console.error("Download failed:",a),a}},m=async(e,t)=>{try{return(await s.post(e,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("File upload failed:",a),a}}},74:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(1),o=a(17),c=a(40),i=a(18),l=a.n(i),d=a(41),u=a.n(d);t.default=function(){const{miqaat_id:e}=Object(s.i)(),[t,a]=Object(r.useState)(""),[i,d]=Object(r.useState)(""),[m,p]=Object(r.useState)(!1),[b,g]=Object(r.useState)("");Object(r.useEffect)(()=>{(async()=>{try{const t=await Object(c.c)("/miqaat/".concat(e,"/"));d((null===t||void 0===t?void 0:t.miqaat_name)||"Unknown Miqaat")}catch(t){g(t.error||"An unexpected error occurred. Please try again.")}})()},[e]);const f=Object(s.g)();return n.a.createElement("div",{className:"relative min-h-screen bg-cover bg-center",style:{backgroundImage:"url('/rice.jpg')"}},n.a.createElement("div",{className:"relative z-10 flex  items-center justify-center min-h-screen px-4 py-12"},n.a.createElement("div",{className:"w-full max-w-xl rounded-2xl shadow-xl p-10 sm:p-4 h-auto min-h-[450px] relative overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.4)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"}},n.a.createElement("div",{className:"flex justify-center items-center"},n.a.createElement("img",{src:u.a,alt:"Logo",className:"h-25 w-auto"})),n.a.createElement("div",{className:"text-center mb-6"},n.a.createElement("h1",{className:"text-3xl font-bold text-gray-800 "},"Miqaat Registration"),n.a.createElement("p",{className:"mt-2 text-gray-600"},"Miqaat:"," ",n.a.createElement("span",{className:"font-semibold text-purple-700 "},i))),n.a.createElement("form",{onSubmit:async r=>{r.preventDefault(),p(!0);try{const r=await Object(c.e)("/miqaat/register/",{its:t,miqaat_id:e});l.a.success(r.message||"Registered successfully!"),a("")}catch(n){g(n.error||"An unexpected error occurred. Please try again.")}finally{p(!1)}},className:"flex flex-col sm:flex-row items-center gap-3 mb-8 justify-center w-full"},n.a.createElement(o.Label,{className:"block text-gray-100 dark:text-gray-300 w-full sm:w-auto"},n.a.createElement("div",{className:"relative mt-1"},n.a.createElement(o.Input,{type:"text",value:t,onChange:e=>a(e.target.value),required:!0,placeholder:"Enter your ITS number",className:"w-full sm:w-64  rounded-lg border border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200"}))),n.a.createElement("button",{type:"submit",disabled:m,className:"w-full sm:min-w-[160px] sm:w-auto flex items-center justify-center bg-indigo-600 text-white px-4 py-2 rounded-lg shadow-md text-sm font-medium transition-all duration-200 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"},m?"Submitting...":"Register"),n.a.createElement("button",{onClick:()=>{f.push("/miqaat/history")},type:"button",className:"w-full sm:min-w-[160px] sm:w-auto flex items-center justify-center bg-indigo-600 text-white px-4 py-2 rounded-lg shadow-md text-sm font-medium transition-all duration-200 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"},"Attendance History")),b&&n.a.createElement("p",{className:"text-red-700 text-lg text-center mb-6 font-large animate-pulse"},b))))}}}]);
//# sourceMappingURL=32.c31db8d8.chunk.js.map