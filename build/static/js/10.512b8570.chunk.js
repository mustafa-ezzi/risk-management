(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[10],{105:function(e,a,t){"use strict";t.r(a);var n=t(11),r=t(0),l=t.n(r),c=t(1),s=t(40),i=(t(53),t(45)),o=(t(52),t(17)),m=t(18),d=t(44);a.default=function(){const e=Object(c.g)(),a=Object(c.h)(),t=new URLSearchParams(a.search),u=t.get("miqaat_type"),p=t.get("miqaat_type"),[h,b]=Object(r.useState)({miqaat_name:"",miqaat_date:"",hijri_date:"",miqaat_type:u||"",description:"",zones:[]}),[f,g]=Object(r.useState)(!1);Object(r.useEffect)(()=>{if(j(),h.miqaat_date){const e=(e=>{const a=new Date(e);if(isNaN(a.getTime()))return"";const t=new Date(2025,2,13),n=1446,r=9,l=14,c=Math.floor((a-t)/864e5);let s=n+Math.floor(c/354),i=r,o=l+c%354;const m=[30,29,30,29,30,29,30,30,29,30,29,30];for(;o>m[i-1];)o-=m[i-1],i++,i>12&&(i=1,s++);for(;o<1;)i--,i<1&&(i=12,s--),o+=m[i-1];return"".concat(o," ").concat(["Moharramul Haram","Safarul Muzaffar","Rabiul Awwal","Rabiul Akhar","Jumadil Ula","Jumadal Ukhra","Rajabal Asab","Shabanul Karim","Ramadanal Moazzam","Shawwalul Mukarram","Ziqadatil Haram","Zilhajatil Haram"][i-1]," ").concat(s)})(h.miqaat_date);b(a=>Object(n.a)(Object(n.a)({},a),{},{hijri_date:e}))}},[h.miqaat_date]);const y=e=>{const{name:a,value:t}=e.target;u&&"miqaat_type"===a||"hijri_date"===a||b(Object(n.a)(Object(n.a)({},h),{},{[a]:t}))},[E,v]=Object(r.useState)([]),[q,w]=Object(r.useState)([]),j=async()=>{const e=await Object(s.c)("/zone/list/");v(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,null," ",l.a.createElement("button",{onClick:()=>{e.goBack()},className:"mr-4"},l.a.createElement(d.a,{className:"w-5 h-5 dark:text-white"})),(()=>{switch(p){case"general_miqaats":return"Create General Miqaat";case"ramadan":return"Create Ramadan";case"private_events":return"Create Private Event";default:return"Miqaats"}})()),l.a.createElement("form",{onSubmit:async a=>{a.preventDefault(),g(!0);const t=["miqaat_name","miqaat_date","miqaat_type"].filter(e=>!h[e]);if(t.length>0)return console.error("Please fill in all required fields: ".concat(t.join(", "))),void g(!1);try{const a=Object(n.a)({},h),t=await Object(s.e)("/miqaat/",a);m.toast.success("Miqaat created successfully"),e.push("/miqaat-menu/".concat(t.id))}catch(c){var r,l;console.error("Error creating miqaat:",c),m.toast.error((null===(r=c.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)||"Failed to create miqaat")}finally{g(!1)}}},l.a.createElement("div",{className:"px-4 grid grid-cols-1 gap-6 md:grid-cols-2 py-3 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800"},l.a.createElement(o.Label,null,l.a.createElement("span",null,"Miqaat Name"),l.a.createElement(o.Input,{className:"mt-1",name:"miqaat_name",value:h.miqaat_name,onChange:y,placeholder:"Enter miqaat name",required:!0})),l.a.createElement(o.Label,null,l.a.createElement("span",null,"Miqaat Type"),u?l.a.createElement("div",{className:"mt-1 py-2 px-3 border rounded-md border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"},(e=>{switch(e){case"general_miqaats":return"General Miqaats";case"private_events":return"Private Events";case"ramadan":return"Ramadan";default:return e}})(u)):l.a.createElement(o.Select,{className:"mt-1",name:"miqaat_type",value:h.miqaat_type,onChange:y,required:!0},l.a.createElement("option",{value:"general_miqaats"},"General Miqaats"),l.a.createElement("option",{value:"private_events"},"Private Events"),l.a.createElement("option",{value:"ramadan"},"Ramadan")),u&&l.a.createElement("input",{type:"hidden",name:"miqaat_type",value:u})),l.a.createElement(o.Label,null,l.a.createElement("span",null,"Miqaat Date"),l.a.createElement(o.Input,{type:"date",className:"mt-1",name:"miqaat_date",value:h.miqaat_date,onChange:y,required:!0})),l.a.createElement(o.Label,null,l.a.createElement("span",null,"Hijri Date"),l.a.createElement(o.Input,{className:"mt-1",name:"hijri_date",value:h.hijri_date,readOnly:!0,disabled:!0,placeholder:"Automatically calculated from Miqaat Date"}),l.a.createElement(o.HelperText,null,"This field is automatically calculated from the Miqaat Date")),l.a.createElement("div",{className:"md:col-span-2"},l.a.createElement(o.Label,null,l.a.createElement("span",null,"Description"),l.a.createElement(o.Textarea,{className:"mt-1",rows:"4",name:"description",value:h.description,onChange:y,placeholder:"Enter miqaat description"}))),l.a.createElement("div",{className:"md:col-span-2"},l.a.createElement(o.Label,{className:"mt-4"},l.a.createElement("span",null,"Select Zones"),l.a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-2"},E.map(e=>l.a.createElement("label",{key:e.id,className:"flex items-center space-x-2"},l.a.createElement("input",{type:"checkbox",value:e.id,checked:h.zones.includes(e.id),onChange:()=>{return a=e.id,void b(e=>{const t=e.zones.includes(a)?e.zones.filter(e=>e!==a):[...e.zones,a];return Object(n.a)(Object(n.a)({},e),{},{zones:t})});var a},className:"form-checkbox text-purple-600"}),l.a.createElement("span",{className:"text-gray-700 dark:text-gray-300"},e.name)))))),l.a.createElement("div",{className:"md:col-span-2 flex md:justify-end justify-center mt-6"},l.a.createElement(o.Button,{type:"submit",disabled:f},f?"Creating...":"Create Miqaat")))))}},40:function(e,a,t){"use strict";t.d(a,"c",(function(){return c})),t.d(a,"e",(function(){return s})),t.d(a,"f",(function(){return i})),t.d(a,"d",(function(){return o})),t.d(a,"a",(function(){return m})),t.d(a,"b",(function(){return d})),t.d(a,"g",(function(){return u}));var n=t(109);let r="https://rms-v2.duckdns.org/api";console.log("Running in Production Mode"),r="http://35.172.211.35/api";const l=n.a.create({baseURL:r,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{const a=localStorage.getItem("accessToken");return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>(e.response&&401===e.response.status&&(localStorage.clear(),window.location.href="/"),Promise.reject(e)));const c=async(e,a)=>l.get(e,{params:a}).then(e=>e.data),s=async(e,a)=>l.post(e,a).then(e=>e.data),i=async(e,a)=>l.put(e,a).then(e=>e.data),o=async(e,a)=>l.patch(e,a).then(e=>e.data),m=async e=>l.delete(e).then(e=>e.data),d=async(e,a)=>{try{const t=await l.get(e,{responseType:"blob"}),n=new Blob([t.data],{type:"application/pdf"}),r=window.URL.createObjectURL(n),c=document.createElement("a");c.href=r,c.setAttribute("download",a),document.body.appendChild(c),c.click(),c.remove(),window.URL.revokeObjectURL(r)}catch(t){throw console.error("Download failed:",t),t}},u=async(e,a)=>{try{return(await l.post(e,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("File upload failed:",t),t}}},45:function(e,a,t){"use strict";var n=t(0),r=t.n(n);a.a=function(e){let{children:a}=e;return r.a.createElement("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200"},a)}},52:function(e,a,t){"use strict";var n=t(0),r=t.n(n);a.a=function(e){let{children:a}=e;return r.a.createElement("h2",{className:"mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300"},a)}},53:function(e,a,t){"use strict";var n=t(0),r=t.n(n);a.a=function(){return r.a.createElement("a",{className:"flex items-center justify-between p-4 mb-8 text-sm font-semibold text-purple-100 bg-purple-600 rounded-lg shadow-md focus:outline-none focus:shadow-outline-purple",href:"https://github.com/estevanmaito/windmill-dashboard-react"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})),r.a.createElement("span",null,"Star this project on GitHub")),r.a.createElement("span",null,"View more ",r.a.createElement("span",{dangerouslySetInnerHTML:{__html:"&RightArrow;"}})))}}}]);
//# sourceMappingURL=10.512b8570.chunk.js.map