(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[6],{14:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return i}));var n=a(11),o=a(0),r=a.n(o);const c=Object(o.createContext)(),l=e=>{let{children:t}=e;const[a,l]=Object(o.useState)({isDialogOpen:!1,fromFeatureModal:!1,selectedEvent:null});return r.a.createElement(c.Provider,{value:{modalState:a,openModal:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l({isDialogOpen:!0,fromFeatureModal:t,selectedEvent:e})},closeModal:()=>{l(e=>Object(n.a)(Object(n.a)({},e),{},{isDialogOpen:!1}))},clearModalState:()=>{l({isDialogOpen:!1,fromFeatureModal:!1,selectedEvent:null})}}},t)},i=()=>Object(o.useContext)(c)},19:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c}));var n=a(0),o=a.n(n);const r=o.a.createContext(),c=e=>{let{children:t}=e;const[a,c]=Object(n.useState)(!1);function l(){c(!a)}function i(){c(!1)}const s=Object(n.useMemo)(()=>({isSidebarOpen:a,toggleSidebar:l,closeSidebar:i}),[a]);return o.a.createElement(r.Provider,{value:s},t)}},24:function(e,t,a){"use strict";var n=a(0),o=a.n(n);t.a=function(){return o.a.createElement("div",{className:"w-full h-screen p-6 text-lg font-medium text-gray-600 dark:text-gray-400 dark:bg-gray-900"},"Loading...")}},26:function(e,t,a){e.exports=a(39)},31:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(12),c=a.n(r),l=(a(31),a(8)),i=a(1);var s=function(){const[e,t]=Object(n.useState)(""),a=Object(i.h)();return Object(n.useEffect)(()=>{a.pathname.slice(1)?setTimeout(()=>t("Navigated to ".concat(a.pathname.slice(1)," page.")),500):t("")},[a]),o.a.createElement("span",{className:"sr-only",role:"status","aria-live":"polite","aria-atomic":"true"},e)},d=a(10);const p=["component"];var u=e=>{let{component:t}=e,a=Object(d.a)(e,p);return o.a.createElement(i.b,Object.assign({},a,{render:e=>localStorage.getItem("accessToken")?o.a.createElement(i.a,{to:"/app"}):o.a.createElement(t,e)}))};const m=["component"];var g=e=>{let{component:t}=e,a=Object(d.a)(e,m);const n=!!localStorage.getItem("accessToken"),r=(JSON.parse(localStorage.getItem("user")||"{}"),localStorage.getItem("role")),c={admin:["/app/request"],super_admin:["/app/users","/app/request","/app/zones","/app/city","/app/batch"]};return o.a.createElement(i.b,Object.assign({},a,{render:e=>{const a=e.location.pathname;if(!n)return o.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}});const l=c[r];if(!l||!l.includes(a)){const e="super_admin"===r?"/app/users":"/app/request";return o.a.createElement(i.a,{to:e})}return o.a.createElement(t,e)}}))},b=a(18),h=a(14);const f=()=>o.a.createElement("div",{className:"flex items-center justify-center w-full h-screen"},o.a.createElement("div",{className:"w-16 h-16 border-4 border-purple-600 border-solid rounded-full border-t-transparent animate-spin"})),E=Object(n.lazy)(()=>Promise.all([a.e(4),a.e(14)]).then(a.bind(null,110))),v=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(11)]).then(a.bind(null,99))),w=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(4),a.e(13)]).then(a.bind(null,100))),O=Object(n.lazy)(()=>a.e(24).then(a.bind(null,101))),x=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(22)]).then(a.bind(null,74))),y=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(1),a.e(21)]).then(a.bind(null,75)));Object(n.lazy)(()=>Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(35)]).then(a.bind(null,102)));function j(){const e=Object(i.g)(),{clearModalState:t}=Object(h.b)();return Object(n.useEffect)(()=>{const a=["/app/miqaat-menu/","/app/miqaat-attendance/","/app/counter-packing/","/app/distribution/","/app/leftover-degs/"],n=e.listen((n,o)=>{const r=e.location.pathname,c=n.pathname,l=r.includes("/app/tables")||a.some(e=>r.includes(e)),i=a.some(e=>c.includes(e)),s=c.includes("/app/tables");!l||i||s||t()});return()=>n()},[e,t]),o.a.createElement(i.d,null,o.a.createElement(u,{path:"/login",component:v}),o.a.createElement(u,{path:"/create-account",component:w}),o.a.createElement(u,{path:"/forgot-password",component:O}),o.a.createElement(u,{path:"/registration/:miqaat_id",component:x}),o.a.createElement(u,{path:"/miqaat/history",component:y}),o.a.createElement(g,{path:"/app",component:E}),o.a.createElement(i.b,{exact:!0,path:"/"},localStorage.getItem("accessToken")?o.a.createElement(i.a,{to:"app/event/miqaat-home"}):o.a.createElement(i.a,{to:"/login"})),o.a.createElement(i.b,{path:"*"},localStorage.getItem("accessToken")?o.a.createElement(i.a,{to:"/app"}):o.a.createElement(i.a,{to:"/login"})))}var S=function(){return o.a.createElement(h.a,null,o.a.createElement(l.a,null,o.a.createElement(s,null),o.a.createElement(n.Suspense,{fallback:o.a.createElement(f,null)},o.a.createElement(j,null),o.a.createElement(b.Toaster,{position:"top-right",toastOptions:{success:{style:{background:"linear-gradient(to right, #0D9488, #10B981)",color:"white",borderRadius:"8px",fontWeight:500,padding:"10px 16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},iconTheme:{primary:"white",secondary:"#0D9488"}},error:{style:{background:"linear-gradient(to right, #DC2626, #EF4444)",color:"white",borderRadius:"8px",fontWeight:500,padding:"10px 16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},iconTheme:{primary:"white",secondary:"#DC2626"}},loading:{style:{background:"linear-gradient(to right, #1F2937, #374151)",color:"white",borderRadius:"8px",fontWeight:500,padding:"10px 16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},duration:4e3}}))))},k=a(19),W=a(24),P=a(17);const T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}c.a.render(o.a.createElement(k.b,null,o.a.createElement(n.Suspense,{fallback:o.a.createElement(W.a,null)},o.a.createElement(P.Windmill,{usePreferences:!0},o.a.createElement(S,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("","/service-worker.js");T?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(a=>{const n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):q(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):q(t,e)})}}()}},[[26,7,8]]]);
//# sourceMappingURL=main.9ef5e35a.chunk.js.map