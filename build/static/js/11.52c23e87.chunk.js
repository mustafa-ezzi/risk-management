(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[11,35],{40:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"g",(function(){return m}));var r=a(109);let n="https://rms-v2.duckdns.org/api";console.log("Running in Production Mode"),n="http://35.172.211.35/api";const o=r.a.create({baseURL:n,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>(e.response&&401===e.response.status&&(localStorage.clear(),window.location.href="/"),Promise.reject(e)));const s=async(e,t)=>o.get(e,{params:t}).then(e=>e.data),l=async(e,t)=>o.post(e,t).then(e=>e.data),c=async(e,t)=>o.put(e,t).then(e=>e.data),i=async(e,t)=>o.patch(e,t).then(e=>e.data),d=async e=>o.delete(e).then(e=>e.data),u=async(e,t)=>{try{const a=await o.get(e,{responseType:"blob"}),r=new Blob([a.data],{type:"application/pdf"}),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.setAttribute("download",t),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(n)}catch(a){throw console.error("Download failed:",a),a}},m=async(e,t)=>{try{return(await o.post(e,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("File upload failed:",a),a}}},41:function(e,t,a){e.exports=a.p+"static/media/mainLogo.a5300d04.png"},48:function(e,t,a){e.exports=a.p+"static/media/mainLogo-dark.23ec9225.png"},51:function(e,t,a){"use strict";var r=a(0),n=a.n(r);t.a=()=>{const e=(new Date).getFullYear();return n.a.createElement("footer",{style:{bottom:0,left:0,right:0,color:"#9CA3AF",textAlign:"center",padding:"0.75rem",fontSize:"0.875rem",zIndex:0,background:"linear-gradient(ellipse at center, #DC143C 0%, #300040 50%, #000000 80%)"},className:""},"\xa9 ",e," Designed and Developed By"," ",n.a.createElement("a",{href:"https://5cube.io",target:"_blank",rel:"noopener noreferrer",style:{fontWeight:700,color:"#A855F7",textDecoration:"none",cursor:"pointer"},onMouseOver:e=>e.target.style.color="#9333EA",onMouseOut:e=>e.target.style.color="#A855F7"},"5Cube"))}},99:function(e,t,a){"use strict";a.r(t);var r=a(11),n=a(0),o=a.n(n),s=a(1),l=a(17),c=a(40),i=a(51),d=a(41),u=a.n(d),m=a(48),p=a.n(m);t.default=function(){Object(s.g)();const[e,t]=Object(n.useState)({username:"",password:""}),[a,d]=Object(n.useState)(""),[m,g]=Object(n.useState)(!1),[h,f]=Object(n.useState)(!1),[b,w]=Object(n.useState)([]),y=e=>{const{name:a,value:n}=e.target;t(e=>Object(r.a)(Object(r.a)({},e),{},{[a]:n}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900"},o.a.createElement("div",{className:"flex-1 h-full max-w-md mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800"},o.a.createElement("div",{className:"overflow-y-auto"},o.a.createElement("main",{className:"flex items-center justify-center p-6 sm:p-12 md:w-full"},o.a.createElement("form",{className:"w-full",onSubmit:async t=>{if(t.preventDefault(),d(""),e.username&&e.password){g(!0);try{const t=await Object(c.e)("/users/login/",{username:e.username,password:e.password});t&&(t.access&&localStorage.setItem("accessToken",t.access),t.refresh&&localStorage.setItem("refreshToken",t.refresh),t.user&&(localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("role",t.user.role))),await(async()=>{try{g(!0);const e=await Object(c.c)("/users/me");(null===e||void 0===e?void 0:e.role)&&localStorage.setItem("role",e.role),w(e)}catch(e){console.error("Error fetching permissions data:",e),d("Failed to load permissions data")}finally{g(!1)}})();const a=localStorage.getItem("role");let r="/app/request";"super_admin"===a&&(r="/app/users")}catch(n){var a,r;console.error("Login error:",n),d((null===n||void 0===n||null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.detail)||"Invalid username or password. Please try again.")}finally{g(!1)}}else d("username and password are required")}},o.a.createElement("div",{className:"flex justify-center items-center"},o.a.createElement("img",{src:u.a,alt:"Logo Light",className:"h-20 w-auto dark:hidden"}),o.a.createElement("img",{src:p.a,alt:"Logo Dark",className:"h-20 w-auto hidden dark:block"})),o.a.createElement("h1",{className:"mb-4 text-xl font-semibold text-gray-700 dark:text-gray-200"},"Login"),a&&o.a.createElement(l.HelperText,{className:"mb-4",valid:!1},a),o.a.createElement(l.Label,null,o.a.createElement(l.Input,{className:"mt-1",name:"username",value:e.username,onChange:y,placeholder:"username"})),o.a.createElement(l.Label,{className:"mt-4"},o.a.createElement("div",{className:"relative"},o.a.createElement(l.Input,{className:"mt-1 pr-10",type:h?"text":"password",name:"password",value:e.password,onChange:y,placeholder:"Password"}),o.a.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 focus:outline-none focus:ring-0",onClick:()=>{f(e=>!e)}},h?o.a.createElement("svg",{className:"h-5 w-5 focus:outline-none focus:ring-0 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.79m0 0L21 21"})):o.a.createElement("svg",{className:"h-5 w-5 focus:outline-none focus:ring-0 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}))))),o.a.createElement(l.Button,{className:"mt-4",block:!0,type:"submit",disabled:m},m?"Logging in...":"Log in")))),o.a.createElement("hr",null),o.a.createElement(i.a,null))))}}}]);
//# sourceMappingURL=11.52c23e87.chunk.js.map